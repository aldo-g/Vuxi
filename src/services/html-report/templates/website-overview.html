{% extends "base.html" %}

{% block content %}
<h1>Website Analysis Overview</h1>

<div class="info-grid">
    <div class="info-card">
        <div class="info-label">Organization</div>
        <div class="info-value">{{ organization }}</div>
    </div>
    <div class="info-card">
        <div class="info-label">Analysis Date</div>
        <div class="info-value">{{ analysis_date }}</div>
    </div>
    <div class="info-card">
        <div class="info-label">Pages Analyzed</div>
        <div class="info-value">{{ total_pages_analyzed }}</div>
    </div>
    <div class="info-card">
        <div class="info-label">Overall Score</div>
        <div class="info-value {% if overall_score >= 8 %}good{% elif overall_score >= 6 %}average{% else %}poor{% endif %}">
            {{ overall_score }}/10
        </div>
    </div>
</div>

<!-- Executive Summary -->
<div class="section">
    <h2>Executive Summary</h2>
    <div class="analysis-result">
        <p style="font-size: 1.1em; line-height: 1.7;">{{ executive_summary }}</p>
    </div>
</div>

<!-- Critical Issues -->
{% if most_critical_issues and most_critical_issues.length > 0 %}
<div class="section">
    <h2>Most Critical Issues</h2>
    {% for issue in most_critical_issues %}
    <div class="critical-issue">
        <strong>{{ loop.index }}.</strong> {{ issue }}
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Top Recommendations -->
{% if top_recommendations and top_recommendations.length > 0 %}
<div class="section">
    <h2>Top Priority Recommendations</h2>
    {% for recommendation in top_recommendations %}
    <div class="recommendation">
        <strong>{{ loop.index }}.</strong> {{ recommendation }}
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Key Strengths -->
{% if key_strengths and key_strengths.length > 0 %}
<div class="section">
    <h2>Key Strengths</h2>
    {% for strength in key_strengths %}
    <div class="list-item" style="color: #10b981; background-color: #f0fdf4; padding: 10px; margin-bottom: 8px; border-radius: 4px;">
        {{ strength }}
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Performance Summary -->
<div class="section">
    <h2>Technical Performance Summary</h2>
    <div class="analysis-result">
        <p>{{ performance_summary }}</p>
    </div>
</div>

<!-- Page Analysis Summary -->
{% if page_summaries and page_summaries.length > 0 %}
<div class="section">
    <h2>Individual Page Summaries</h2>
    {% for page in page_summaries %}
    <div style="margin-bottom: 20px; padding: 15px; background-color: #f8fafc; border-radius: 6px; border-left: 4px solid #3b82f6;">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
            <h3 style="margin: 0; color: #1e293b;">{{ page.name }}</h3>
            <div class="score-badge {% if page.score >= 8 %}good{% elif page.score >= 6 %}average{% else %}poor{% endif %}" 
                 style="padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 0.9em;">
                {{ page.score }}/10
            </div>
        </div>
        <p style="margin-bottom: 5px; color: #64748b; font-size: 0.9em;"><strong>URL:</strong> {{ page.url }}</p>
        <p style="margin-bottom: 10px;">{{ page.summary }}</p>
        <a href="{{ page.filename }}" style="color: #3b82f6; text-decoration: none; font-weight: 500;">
            View Detailed Analysis â†’
        </a>
    </div>
    {% endfor %}
</div>
{% endif %}

<style>
.score-badge.good { 
    background-color: #10b981; 
    color: white; 
}
.score-badge.average { 
    background-color: #f59e0b; 
    color: white; 
}
.score-badge.poor { 
    background-color: #ef4444; 
    color: white; 
}
</style>
{% endblock %}